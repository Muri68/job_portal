{% extends "job/base.html" %}


{% block content %}
<style>
  .user-btn {
    background: var(--primary);
    color: #ffffff;
  }
  .user-btn:hover {
    background: var(--secondary);
    color: #ffffff;
  }

  .applicant-btn {
    border: 1px solid var(--primary);
    color: var(--primary);
  }
  .applicant-btn:hover {
    background: var(--primary);
    color: #ffffff;
  }
  
</style>

<div class="main-header">
  <div class="d-flex justify-content-between align-items-center">
    <h1 class="h3 mb-0">Dashboard</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
      <a href="{% url 'add_admin_user' %}" class="btn btn-sm user-btn">
        <i class="bi bi-person-fill-add me-1"></i>
        Add User
      </a>
    </div>
  </div>
</div>

<!-- Stats Cards -->
<div class="row">
  <div class="col-xl-4 col-md-6 mb-4">
    <div class="card border-0 stats-card">
      <div class="card-body">
        <div class="d-flex align-items-center">
          <div class="flex-grow-1">
            <div class="bg-soft-primary p-3 rounded-3">
              <i class="bi bi-briefcase-fill fs-3" style="color: #257dd4"></i>
            </div>
          </div>
          <div class="flex-shrink-0">
            <h4 class="mb-0">{{ total_jobs }}</h4>
          </div>
        </div>
        <div class="mt-1">
          <a href="{% url "job_list" %}" class="badge bg-soft-success h2 text-decoration-none" style="color: #257dd4">
            Jobs <i class="bi bi-chevron-right mx-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-4 col-md-6 mb-4">
    <div class="card border-0 stats-card">
      <div class="card-body">
        <div class="d-flex align-items-center">
          <div class="flex-grow-1">
            <div class="bg-soft-success p-3 rounded-3">
              <i class="bi bi-people-fill fs-3" style="color: #257dd4"></i>
            </div>
          </div>
          <div class="flex-shrink-0">
            <h4 class="mb-0">{{ total_applications }}</h4>
          </div>
        </div>
        <div class="mt-1">
          <a href="{% url "applicants_list" %}" class="badge bg-soft-success h3 text-decoration-none" style="color: #257dd4">
            Applicants <i class="bi bi-chevron-right mx-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-4 col-md-6 mb-4">
    <div class="card border-0 stats-card">
      <div class="card-body">
        <div class="d-flex align-items-center">
          <div class="flex-grow-1">
            <div class="bg-soft-info p-3 rounded-3">
              <i class="bi bi-person-check fs-3" style="color: #257dd4"></i>
            </div>
          </div>
          <div class="flex-shrink-0">
            <h4 class="mb-0">{{ total_admins }}</h4>
          </div>
        </div>
        <div class="mt-1">
          <a href="{% url 'admin_users_list' %}" class="badge bg-soft-success h3 text-decoration-none" style="color: #257dd4">
            Users <i class="bi bi-chevron-right mx-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-8">
    <div class="card">
      <div class="card-header bg-white">
        <h5 class="card-title mb-0">Application Statistics</h5>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <canvas id="myChart" width="900" height="380"></canvas>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card">
      <div class="card-header bg-white">
        <h5 class="card-title mb-0">Recent Activity</h5>
      </div>
      <div class="card-body">
        <div class="d-flex mb-4">
          <div class="flex-shrink-0">
            <img src="https://ui-avatars.com/api/?name=Sarah+Johnson&background=4cc9f0&color=fff" alt="" class="user-avatar" style="width: 40px; height: 40px;">
          </div>
          <div class="flex-grow-1 ms-3">
            <h6 class="mb-1">Sarah Johnson applied for Frontend Developer</h6>
            <p class="text-muted mb-0">2 hours ago</p>
          </div>
        </div>
        <div class="d-flex mb-4">
          <div class="flex-shrink-0">
            <img src="https://ui-avatars.com/api/?name=Michael+Chen&background=3f37c9&color=fff" alt="" class="user-avatar" style="width: 40px; height: 40px;">
          </div>
          <div class="flex-grow-1 ms-3">
            <h6 class="mb-1">Michael Chen scheduled an interview</h6>
            <p class="text-muted mb-0">5 hours ago</p>
          </div>
        </div>
        <div class="d-flex mb-4">
          <div class="flex-shrink-0">
            <img src="https://ui-avatars.com/api/?name=Emma+Wilson&background=4361ee&color=fff" alt="" class="user-avatar" style="width: 40px; height: 40px;">
          </div>
          <div class="flex-grow-1 ms-3">
            <h6 class="mb-1">Emma Wilson was hired as UX Designer</h6>
            <p class="text-muted mb-0">Yesterday</p>
          </div>
        </div>
        <div class="d-flex">
          <div class="flex-shrink-0">
            <img src="https://ui-avatars.com/api/?name=David+Brown&background=4cc9f0&color=fff" alt="" class="user-avatar" style="width: 40px; height: 40px;">
          </div>
          <div class="flex-grow-1 ms-3">
            <h6 class="mb-1">David Brown posted a new job</h6>
            <p class="text-muted mb-0">2 days ago</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="card mt-4">
  <div class="card-header bg-white">
    <h5 class="card-title mb-0">Recent Applicants</h5>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Serial</th>
            <th scope="col">Name</th>
            <th scope="col">Position</th>
            <th scope="col">Status</th>
            <th scope="col">Applied On</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for applicants in recent_applications %}
          <tr>
            <td>{{ forloop.counter }}.</td>
            <td>
              <div class="d-flex align-items-center">
                {{ applicants.applicant_name}}
              </div>
            </td>
            <td>{{applicants.job.title }}</td>
            <td>
              <span class="badge 
                  {% if applicants.status == 'pending' %} bg-warning
                  {% elif applicants.status == 'reviewed' %} bg-info
                  {% elif applicants.status == 'accepted' %} bg-success
                  {% else %} bg-danger
                  {% endif %}">
                  {{ applicants.status|title }}
              </span>
            </td>
            <td>{{ applicants.applied_at|date:"M d, Y H:i" }}</td>
            <td>
              <a href="{% url 'applicant_detail' applicants.id %}" class="btn btn-sm applicant-btn">
                  <i class="bi bi-person-lines-fill me-1"></i> View Profile
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock content %}